<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>StandardFile.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ProGen</a> &gt; <a href="index.source.html" class="el_package">progen.output.outputers</a> &gt; <span class="el_source">StandardFile.java</span></div><h1>StandardFile.java</h1><pre class="source lang-java linenums">/**
 * 
 */
package progen.output.outputers;

import java.util.Map;

import progen.context.ProGenContext;
import progen.kernel.population.Individual;
import progen.output.HistoricalData;
import progen.output.dataCollectors.DataCollector;
import progen.output.plugins.Mean;
import progen.output.plugins.Plugin;

/**
 * Se genera por la salida estándar una tabla con la información estadística de
 * los datos de cada generación.
 * 
 * @author jirsis
 * @since 2.0
 * 
 */
public class StandardFile extends FileOutput {

  private static final String EXPERIMENT_INDIVIDUAL_DATA_LITERAL = &quot;ExperimentIndividualData&quot;;
  /** Separador central de la tabla que imprime por pantalla. */
  private static final String CENTER_SEP = &quot; | &quot;;
  /** Separador izquierdo de la tabla que imprime por pantalla. */
<span class="nc" id="L29">  private static final String LEFT_SEP = CENTER_SEP.substring(1, 3);</span>
  /** Separador derecho de la tabla que imprime por pantalla. */
<span class="nc" id="L31">  private static final String RIGHT_SEP = CENTER_SEP.substring(1);</span>
  /** Ancho de cada columna de la tabla. */
  private static final int WIDTH_COLUMN = 10;

  /** Ancho de la primera columna. */
  private int firstColumnWidth;
  /** Ancho de la segunda columna. */
  private int secondColumnWidth;

  /** Almacén de datos para recuperar. */
  private HistoricalData historical;

  /** Datos de un experimento concreto. */
  private DataCollector experimentData;

  /** Separador horizontal de filas. */
  private String hline;

  private int totalRPB;
  private int totalADF;

  /**
   * Constructor por defecto.
   */
  public StandardFile() {
<span class="nc" id="L56">    super(&quot;standardOutput.txt&quot;, true);</span>
<span class="nc" id="L57">    historical = HistoricalData.makeInstance();</span>
<span class="nc" id="L58">    experimentData = historical.getDataCollectorExperiment(EXPERIMENT_INDIVIDUAL_DATA_LITERAL);</span>
<span class="nc" id="L59">    final int maxLineLength = getMaxLine().length();</span>
<span class="nc" id="L60">    StringBuilder stb = new StringBuilder(&quot; &quot;);</span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">    for (int i = 2; i &lt; maxLineLength - 1; i++) {</span>
<span class="nc" id="L62">      stb.append(&quot;-&quot;);</span>
    }

<span class="nc" id="L65">    hline = String.format(&quot;%s%n&quot;, stb.toString());</span>
<span class="nc" id="L66">    totalRPB = Integer.parseInt(ProGenContext.getMandatoryProperty(&quot;progen.total.RPB&quot;));</span>
<span class="nc" id="L67">    totalADF = ProGenContext.getOptionalProperty(&quot;progen.total.ADF&quot;, 0);</span>
<span class="nc" id="L68">  }</span>

  @Override
  public void print() {
<span class="nc" id="L72">    this.init();</span>
<span class="nc" id="L73">    int currentGeneration = historical.getCurrentGeneration();</span>
<span class="nc" id="L74">    int maxGenerations = ProGenContext.getOptionalProperty(&quot;progen.max-generation&quot;, Integer.MAX_VALUE);</span>
<span class="nc bnc" id="L75" title="All 2 branches missed.">    if (currentGeneration &lt; maxGenerations) {</span>
<span class="nc" id="L76">      printHeader(maxGenerations);</span>
<span class="nc" id="L77">      printBody();</span>
<span class="nc" id="L78">      printTail();</span>
    }
<span class="nc" id="L80">    this.close();</span>
<span class="nc" id="L81">  }</span>

  /**
   * Imprime la cabecera de la tabla de resultados.
   */
  private void printHeader(int maxGenerations) {
    // int maxGenerations =
    // ProGenContext.getMandatoryProperty(&quot;progen.max-generation&quot;).length();
<span class="nc" id="L89">    String generation = getLiterals().getString(&quot;generation&quot;) + Formatter.right(historical.getCurrentGeneration() + &quot;&quot;, maxGenerations);</span>
<span class="nc" id="L90">    getWriter().printf(&quot;%n%n%s&quot;, hline);</span>
<span class="nc" id="L91">    getWriter().printf(&quot;%s%s%s%n&quot;, LEFT_SEP, Formatter.center(generation, getMaxLine().length() - LEFT_SEP.length() - RIGHT_SEP.length()), RIGHT_SEP);</span>

<span class="nc" id="L93">    getWriter().printf(&quot;%s&quot;, hline);</span>
<span class="nc" id="L94">  }</span>

  /**
   * Imprime el grueso de la tabla.
   */
  private void printBody() {
<span class="nc" id="L100">    Individual bestTotal = (Individual) (historical.getDataCollectorExperiment(EXPERIMENT_INDIVIDUAL_DATA_LITERAL).getPlugin(&quot;best&quot;).getValue());</span>
<span class="nc" id="L101">    Individual bestGeneration = (Individual) (historical.getCurrentDataCollector(EXPERIMENT_INDIVIDUAL_DATA_LITERAL).getPlugin(&quot;best&quot;).getValue());</span>

<span class="nc" id="L103">    printIndividual();</span>
<span class="nc" id="L104">    printTime();</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">    if (bestTotal.equals(bestGeneration)) {</span>
<span class="nc" id="L106">      printBest();</span>
    }
<span class="nc" id="L108">  }</span>

  /**
   * Imprime la tabla del mejor individuo.
   */
  private void printBest() {
<span class="nc" id="L114">    printBestHeaderTable();</span>
<span class="nc" id="L115">    printBestSubHeaderTable();</span>
<span class="nc" id="L116">    printBestData();</span>
<span class="nc" id="L117">    printBestTail();</span>
<span class="nc" id="L118">  }</span>

  /**
   * Imprime la cabecera de la tabla del mejor individuo.
   */
  private void printBestHeaderTable() {
<span class="nc" id="L124">    StringBuilder line = new StringBuilder(LEFT_SEP);</span>
    int padding;

<span class="nc" id="L127">    line.append(String.format(&quot;%s%s&quot;, Formatter.left(getLiterals().getString(&quot;newBestIndividual&quot;), firstColumnWidth + secondColumnWidth), CENTER_SEP));</span>

<span class="nc" id="L129">    padding = Formatter.center(getLiterals().getString(&quot;raw&quot;), WIDTH_COLUMN).length();</span>
<span class="nc" id="L130">    padding += Formatter.center(getLiterals().getString(&quot;adjusted&quot;), WIDTH_COLUMN).length() + 3;</span>
<span class="nc" id="L131">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;fitness&quot;), padding), CENTER_SEP));</span>

<span class="nc" id="L133">    padding = Formatter.center(getLiterals().getString(&quot;nodes&quot;), WIDTH_COLUMN).length();</span>
<span class="nc" id="L134">    padding += Formatter.center(getLiterals().getString(&quot;depth&quot;), WIDTH_COLUMN).length() + 3;</span>
<span class="nc bnc" id="L135" title="All 2 branches missed.">    for (int i = 0; i &lt; totalRPB; i++) {</span>
<span class="nc" id="L136">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(&quot;RBP&quot; + i, padding), CENTER_SEP));</span>
    }
<span class="nc bnc" id="L138" title="All 2 branches missed.">    for (int i = 0; i &lt; totalADF; i++) {</span>
<span class="nc" id="L139">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(&quot;ADF&quot; + i, padding), CENTER_SEP));</span>
    }
<span class="nc" id="L141">    getWriter().printf(&quot;%s%n%s&quot;, line.toString(), hline);</span>
<span class="nc" id="L142">  }</span>

  /**
   * Imprime la cabecera de la tabla de mejor individuo.
   */
  private void printBestSubHeaderTable() {
<span class="nc" id="L148">    printIndividualSubHeaderTable();</span>
<span class="nc" id="L149">  }</span>

  /**
   * Imprime los datos del mejor individuo.
   */
  private void printBestData() {
    StringBuilder line;
    String ceilData;
<span class="nc" id="L157">    Individual best = (Individual) (experimentData.getPlugin(&quot;best&quot;).getValue());</span>

<span class="nc" id="L159">    int padding = Formatter.center(getLiterals().getString(&quot;individual&quot;), WIDTH_COLUMN).length();</span>
<span class="nc" id="L160">    line = new StringBuilder(LEFT_SEP);</span>
<span class="nc" id="L161">    line.append(String.format(&quot;%s&quot;, Formatter.center(&quot; &quot;, padding + CENTER_SEP.length())));</span>
<span class="nc" id="L162">    line.append(String.format(&quot;%s%s&quot;, Formatter.left(getLiterals().getString(&quot;individual&quot;), secondColumnWidth), CENTER_SEP));</span>

<span class="nc" id="L164">    ceilData = String.format(&quot;%.3f&quot;, best.getRawFitness());</span>
<span class="nc" id="L165">    line.append(String.format(&quot;%s%s&quot;, Formatter.right(ceilData, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L166">    ceilData = String.format(&quot;%.5f&quot;, best.getAdjustedFitness());</span>
<span class="nc" id="L167">    line.append(String.format(&quot;%s%s&quot;, Formatter.right(ceilData, WIDTH_COLUMN), CENTER_SEP));</span>

<span class="nc bnc" id="L169" title="All 2 branches missed.">    for (int i = 0; i &lt; totalRPB; i++) {</span>
<span class="nc" id="L170">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(best.getTrees().get(&quot;RPB&quot; + i).getRoot().getTotalNodes() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L171">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(best.getTrees().get(&quot;RPB&quot; + i).getRoot().getMaximunDepth() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc bnc" id="L173" title="All 2 branches missed.">    for (int i = 0; i &lt; totalADF; i++) {</span>
<span class="nc" id="L174">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(best.getTrees().get(&quot;ADF&quot; + i).getRoot().getTotalNodes() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L175">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(best.getTrees().get(&quot;ADF&quot; + i).getRoot().getMaximunDepth() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc" id="L177">    getWriter().printf(&quot;%s%n%s&quot;, line.toString(), hline);</span>
<span class="nc" id="L178">  }</span>

  /**
   * Imprime los datos resumen del mejor individuo.
   */
  private void printBestTail() {
<span class="nc" id="L184">    StringBuilder stb = new StringBuilder();</span>
<span class="nc" id="L185">    Individual best = (Individual) (experimentData.getPlugin(&quot;best&quot;).getValue());</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">    for (int i = 0; i &lt; best.getTotalRPB(); i++) {</span>
<span class="nc" id="L187">      stb.append(String.format(&quot;RPB%d:%n&quot;, i));</span>
<span class="nc" id="L188">      stb.append(Formatter.tree(best.getTrees().get(&quot;RPB&quot; + i)));</span>
<span class="nc" id="L189">      stb.append(String.format(&quot;%n&quot;));</span>
    }

<span class="nc bnc" id="L192" title="All 2 branches missed.">    for (int i = 0; i &lt; best.getTotalADF(); i++) {</span>
<span class="nc" id="L193">      stb.append(String.format(&quot;ADF%d:%n&quot;, i));</span>
<span class="nc" id="L194">      stb.append(Formatter.tree(best.getTrees().get(&quot;ADF&quot; + i)));</span>
<span class="nc" id="L195">      stb.append(String.format(&quot;%n&quot;));</span>
    }

<span class="nc" id="L198">    getWriter().println(stb.toString());</span>
<span class="nc" id="L199">  }</span>

  /**
   * Imprime la tabla de tiempos.
   */
  private void printTime() {
<span class="nc" id="L205">    printTimeHeaderTable();</span>
<span class="nc" id="L206">    printTimeData();</span>

<span class="nc" id="L208">  }</span>

  /**
   * Imprime los datos de la tabla de tiempos.
   */
  private void printTimeData() {
<span class="nc" id="L214">    printTimeBreeding();</span>
<span class="nc" id="L215">    printTimeEvaluation();</span>
<span class="nc" id="L216">  }</span>

  /**
   * Imprime los tiempos de evaluación de individuos.
   */
  private void printTimeEvaluation() {
<span class="nc" id="L222">    StringBuilder line = new StringBuilder(LEFT_SEP);</span>
<span class="nc" id="L223">    int padding = hline.length() - (firstColumnWidth + secondColumnWidth) - 2 * CENTER_SEP.length() - 3;</span>
<span class="nc" id="L224">    padding = padding / 2;</span>
<span class="nc" id="L225">    Plugin evaluation = historical.getCurrentDataCollector(&quot;PopulationTimeData&quot;).getPlugin(&quot;evaluation&quot;);</span>
    String ceilData;

<span class="nc" id="L228">    line.append(String.format(&quot;%s&quot;, Formatter.center(&quot; &quot;, firstColumnWidth)));</span>
<span class="nc" id="L229">    line.append(String.format(&quot;%s%s&quot;, Formatter.left(getLiterals().getString(&quot;evaluation&quot;), secondColumnWidth), CENTER_SEP));</span>
<span class="nc" id="L230">    ceilData = String.format(&quot;%s&quot;, evaluation.getPlugin(&quot;mean&quot;).getValue().toString());</span>
<span class="nc" id="L231">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(ceilData, padding), CENTER_SEP));</span>
<span class="nc" id="L232">    ceilData = String.format(&quot;%s&quot;, evaluation.getPlugin(&quot;total&quot;).getValue().toString());</span>
<span class="nc" id="L233">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(ceilData, padding), CENTER_SEP));</span>
<span class="nc" id="L234">    getWriter().printf(&quot;%s%n%s&quot;, line.toString(), hline);</span>
<span class="nc" id="L235">  }</span>

  /**
   * Imprime los tiempos de ejecución de individuos.
   */
  private void printTimeBreeding() {
<span class="nc" id="L241">    StringBuilder line = new StringBuilder(LEFT_SEP);</span>
<span class="nc" id="L242">    int padding = hline.length() - (firstColumnWidth + secondColumnWidth) - 2 * CENTER_SEP.length() - 3;</span>
<span class="nc" id="L243">    padding = padding / 2;</span>
<span class="nc" id="L244">    Plugin breeding = historical.getCurrentDataCollector(&quot;PopulationTimeData&quot;).getPlugin(&quot;breeding&quot;);</span>
    String ceilData;

<span class="nc" id="L247">    line.append(String.format(&quot;%s&quot;, Formatter.center(&quot; &quot;, firstColumnWidth)));</span>
<span class="nc" id="L248">    line.append(String.format(&quot;%s%s&quot;, Formatter.left(getLiterals().getString(&quot;breeding&quot;), secondColumnWidth), CENTER_SEP));</span>
<span class="nc" id="L249">    ceilData = String.format(&quot;%s&quot;, breeding.getPlugin(&quot;mean&quot;).getValue().toString());</span>
<span class="nc" id="L250">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(ceilData, padding), CENTER_SEP));</span>
<span class="nc" id="L251">    ceilData = String.format(&quot;%s&quot;, breeding.getPlugin(&quot;total&quot;).getValue().toString());</span>
<span class="nc" id="L252">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(ceilData, padding), CENTER_SEP));</span>
<span class="nc" id="L253">    getWriter().printf(&quot;%s%n&quot;, line.toString());</span>
<span class="nc" id="L254">  }</span>

  /**
   * Imprime la cabecera de la tabla de tiempos.
   */
  private void printTimeHeaderTable() {
<span class="nc" id="L260">    StringBuilder line = new StringBuilder(LEFT_SEP);</span>
    int padding;

<span class="nc" id="L263">    line.append(String.format(&quot;%s%s&quot;, Formatter.left(getLiterals().getString(&quot;time&quot;), firstColumnWidth + secondColumnWidth), CENTER_SEP));</span>

<span class="nc" id="L265">    padding = hline.length() - (firstColumnWidth + secondColumnWidth) - 2 * CENTER_SEP.length() - 3;</span>
<span class="nc" id="L266">    padding = padding / 2;</span>

<span class="nc" id="L268">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;populationMean&quot;), padding), CENTER_SEP));</span>
<span class="nc" id="L269">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;totalPopulation&quot;), padding), CENTER_SEP));</span>

<span class="nc" id="L271">    getWriter().printf(&quot;%s%n%s&quot;, line.toString(), hline);</span>
<span class="nc" id="L272">  }</span>

  /**
   * Imprime un individuo.
   */
  private void printIndividual() {
<span class="nc" id="L278">    printIndividualHeaderTable();</span>
<span class="nc" id="L279">    printIndividualSubHeaderTable();</span>
<span class="nc" id="L280">    printIndividualData();</span>
<span class="nc" id="L281">  }</span>

  /**
   * Imprime los datos de un individuo.
   */
  private void printIndividualData() {
<span class="nc" id="L287">    printIndividualBestRunData();</span>
<span class="nc" id="L288">    printIndividualGenerationMeanData();</span>
<span class="nc" id="L289">    printIndividualWorstData();</span>
<span class="nc" id="L290">  }</span>

  /**
   * Imprime los datos de la generación media.
   */
  @SuppressWarnings(&quot;unchecked&quot;)
  private void printIndividualGenerationMeanData() {
    StringBuilder line;
    String ceilData;
<span class="nc" id="L299">    DataCollector populationData = historical.getCurrentDataCollector(&quot;PopulationData&quot;);</span>
<span class="nc" id="L300">    Map&lt;String, Mean&gt; mean = (Map&lt;String, Mean&gt;) (populationData.getPlugin(&quot;individualMean&quot;).getValue());</span>

<span class="nc" id="L302">    int padding = Formatter.center(getLiterals().getString(&quot;individual&quot;), WIDTH_COLUMN).length();</span>
<span class="nc" id="L303">    line = new StringBuilder(LEFT_SEP);</span>
<span class="nc" id="L304">    line.append(String.format(&quot;%s&quot;, Formatter.center(&quot; &quot;, padding + CENTER_SEP.length())));</span>
<span class="nc" id="L305">    line.append(String.format(&quot;%s%s&quot;, Formatter.left(getLiterals().getString(&quot;generationMean&quot;), secondColumnWidth), CENTER_SEP));</span>

<span class="nc" id="L307">    ceilData = String.format(&quot;%.3G&quot;, mean.get(&quot;raw&quot;).getValue());</span>
<span class="nc" id="L308">    line.append(String.format(&quot;%s%s&quot;, Formatter.right(ceilData, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L309">    ceilData = String.format(&quot;%.5f&quot;, mean.get(&quot;adjusted&quot;).getValue());</span>
<span class="nc" id="L310">    line.append(String.format(&quot;%s%s&quot;, Formatter.right(ceilData, WIDTH_COLUMN), CENTER_SEP));</span>

<span class="nc bnc" id="L312" title="All 2 branches missed.">    for (int i = 0; i &lt; totalRPB; i++) {</span>
<span class="nc" id="L313">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(mean.get(&quot;RPB&quot; + i + &quot;-nodes&quot;).getValue().toString(), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L314">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(mean.get(&quot;RPB&quot; + i + &quot;-depth&quot;).getValue().toString(), WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc bnc" id="L316" title="All 2 branches missed.">    for (int i = 0; i &lt; totalADF; i++) {</span>
<span class="nc" id="L317">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(mean.get(&quot;ADF&quot; + i + &quot;-nodes&quot;).getValue().toString(), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L318">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(mean.get(&quot;ADF&quot; + i + &quot;-depth&quot;).getValue().toString(), WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc" id="L320">    getWriter().println(line.toString());</span>
<span class="nc" id="L321">  }</span>

  /**
   * Imprime los datos de la mejor ejecución de un individuo.
   */
  private void printIndividualBestRunData() {
    StringBuilder line;
    String ceilData;
<span class="nc" id="L329">    Individual best = (Individual) (experimentData.getPlugin(&quot;best&quot;).getValue());</span>

<span class="nc" id="L331">    int padding = Formatter.center(getLiterals().getString(&quot;individual&quot;), WIDTH_COLUMN).length();</span>
<span class="nc" id="L332">    line = new StringBuilder(LEFT_SEP);</span>
<span class="nc" id="L333">    line.append(String.format(&quot;%s&quot;, Formatter.center(&quot; &quot;, padding + CENTER_SEP.length())));</span>
<span class="nc" id="L334">    line.append(String.format(&quot;%s%s&quot;, Formatter.left(getLiterals().getString(&quot;bestRun&quot;), secondColumnWidth), CENTER_SEP));</span>

<span class="nc" id="L336">    ceilData = String.format(&quot;%.3f&quot;, best.getRawFitness());</span>
<span class="nc" id="L337">    line.append(String.format(&quot;%s%s&quot;, Formatter.right(ceilData, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L338">    ceilData = String.format(&quot;%.5f&quot;, best.getAdjustedFitness());</span>
<span class="nc" id="L339">    line.append(String.format(&quot;%s%s&quot;, Formatter.right(ceilData, WIDTH_COLUMN), CENTER_SEP));</span>

<span class="nc bnc" id="L341" title="All 2 branches missed.">    for (int i = 0; i &lt; totalRPB; i++) {</span>
<span class="nc" id="L342">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(best.getTrees().get(&quot;RPB&quot; + i).getRoot().getTotalNodes() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L343">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(best.getTrees().get(&quot;RPB&quot; + i).getRoot().getMaximunDepth() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc bnc" id="L345" title="All 2 branches missed.">    for (int i = 0; i &lt; totalADF; i++) {</span>
<span class="nc" id="L346">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(best.getTrees().get(&quot;ADF&quot; + i).getRoot().getTotalNodes() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L347">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(best.getTrees().get(&quot;ADF&quot; + i).getRoot().getMaximunDepth() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc" id="L349">    getWriter().println(line.toString());</span>

<span class="nc" id="L351">  }</span>

  /**
   * Imprime los datos del peor individuo.
   */
  private void printIndividualWorstData() {
    StringBuilder line;
    String ceilData;
<span class="nc" id="L359">    Individual worst = (Individual) (historical.getCurrentDataCollector(EXPERIMENT_INDIVIDUAL_DATA_LITERAL).getPlugin(&quot;worst&quot;).getValue());</span>

<span class="nc" id="L361">    int padding = Formatter.center(getLiterals().getString(&quot;individual&quot;), WIDTH_COLUMN).length();</span>
<span class="nc" id="L362">    line = new StringBuilder(LEFT_SEP);</span>
<span class="nc" id="L363">    line.append(String.format(&quot;%s&quot;, Formatter.center(&quot; &quot;, padding + CENTER_SEP.length())));</span>
<span class="nc" id="L364">    line.append(String.format(&quot;%s%s&quot;, Formatter.left(getLiterals().getString(&quot;worstRun&quot;), secondColumnWidth), CENTER_SEP));</span>

<span class="nc" id="L366">    ceilData = String.format(&quot;%.3G&quot;, worst.getRawFitness());</span>
<span class="nc" id="L367">    line.append(String.format(&quot;%s%s&quot;, Formatter.right(ceilData, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L368">    ceilData = String.format(&quot;%.5f&quot;, worst.getAdjustedFitness());</span>
<span class="nc" id="L369">    line.append(String.format(&quot;%s%s&quot;, Formatter.right(ceilData, WIDTH_COLUMN), CENTER_SEP));</span>

<span class="nc bnc" id="L371" title="All 2 branches missed.">    for (int i = 0; i &lt; totalRPB; i++) {</span>
<span class="nc" id="L372">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(worst.getTrees().get(&quot;RPB&quot; + i).getRoot().getTotalNodes() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L373">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(worst.getTrees().get(&quot;RPB&quot; + i).getRoot().getMaximunDepth() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc bnc" id="L375" title="All 2 branches missed.">    for (int i = 0; i &lt; totalADF; i++) {</span>
<span class="nc" id="L376">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(worst.getTrees().get(&quot;ADF&quot; + i).getRoot().getTotalNodes() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L377">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(worst.getTrees().get(&quot;ADF&quot; + i).getRoot().getMaximunDepth() + &quot;&quot;, WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc" id="L379">    getWriter().printf(&quot;%s%n%s&quot;, line.toString(), hline);</span>

<span class="nc" id="L381">  }</span>

  /**
   * Imprime la cabecera de la subtabla de individuos.
   */
  private void printIndividualSubHeaderTable() {
    // Print sub-head table
<span class="nc" id="L388">    StringBuilder line = new StringBuilder(LEFT_SEP);</span>

<span class="nc" id="L390">    int padding = Formatter.center(getLiterals().getString(&quot;individual&quot;), WIDTH_COLUMN).length();</span>
<span class="nc" id="L391">    line.append(String.format(&quot;%s   %s&quot;, Formatter.center(&quot; &quot;, padding + secondColumnWidth), CENTER_SEP));</span>
<span class="nc" id="L392">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;raw&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L393">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;adjusted&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc bnc" id="L394" title="All 2 branches missed.">    for (int i = 0; i &lt; totalRPB; i++) {</span>
<span class="nc" id="L395">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;nodes&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L396">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;depth&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc bnc" id="L398" title="All 2 branches missed.">    for (int i = 0; i &lt; totalADF; i++) {</span>
<span class="nc" id="L399">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;nodes&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L400">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;depth&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc" id="L402">    getWriter().printf(&quot;%s%n&quot;, line.toString());</span>

<span class="nc" id="L404">  }</span>

  /**
   * Imprime la cabecera de la tabla de individuos.
   */
  private void printIndividualHeaderTable() {
    // Print head table
<span class="nc" id="L411">    StringBuilder line = new StringBuilder(LEFT_SEP);</span>
    int padding;
<span class="nc" id="L413">    firstColumnWidth = WIDTH_COLUMN + CENTER_SEP.length();</span>

<span class="nc" id="L415">    secondColumnWidth = Math.max(WIDTH_COLUMN, getLiterals().getString(&quot;generationMean&quot;).length());</span>
<span class="nc" id="L416">    secondColumnWidth = Math.max(secondColumnWidth, getLiterals().getString(&quot;bestRun&quot;).length());</span>
<span class="nc" id="L417">    secondColumnWidth = Math.max(secondColumnWidth, getLiterals().getString(&quot;worstRun&quot;).length());</span>

<span class="nc" id="L419">    line.append(String.format(&quot;%s%s&quot;, Formatter.left(getLiterals().getString(&quot;individual&quot;), firstColumnWidth + secondColumnWidth), CENTER_SEP));</span>

<span class="nc" id="L421">    padding = Formatter.center(getLiterals().getString(&quot;raw&quot;), WIDTH_COLUMN).length();</span>
<span class="nc" id="L422">    padding += Formatter.center(getLiterals().getString(&quot;adjusted&quot;), WIDTH_COLUMN).length() + 3;</span>
<span class="nc" id="L423">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;fitness&quot;), padding), CENTER_SEP));</span>

<span class="nc" id="L425">    padding = Formatter.center(getLiterals().getString(&quot;nodes&quot;), WIDTH_COLUMN).length();</span>
<span class="nc" id="L426">    padding += Formatter.center(getLiterals().getString(&quot;depth&quot;), WIDTH_COLUMN).length() + 3;</span>
<span class="nc bnc" id="L427" title="All 2 branches missed.">    for (int i = 0; i &lt; totalRPB; i++) {</span>
<span class="nc" id="L428">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(&quot;RBP&quot; + i, padding), CENTER_SEP));</span>
    }
<span class="nc bnc" id="L430" title="All 2 branches missed.">    for (int i = 0; i &lt; totalADF; i++) {</span>
<span class="nc" id="L431">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(&quot;ADF&quot; + i, padding), CENTER_SEP));</span>
    }
<span class="nc" id="L433">    getWriter().printf(&quot;%s%n%s&quot;, line.toString(), hline);</span>
<span class="nc" id="L434">  }</span>

  /**
   * Imprime los resumenes de las tablas.
   */
  private void printTail() {
    // do nothing
<span class="nc" id="L441">  }</span>

  /**
   * Devuelve la línea más larga que contendrá una tabla.
   * 
   * @return La línea más larga.
   */
  private String getMaxLine() {
<span class="nc" id="L449">    StringBuilder line = new StringBuilder(LEFT_SEP);</span>
<span class="nc" id="L450">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;individual&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L451">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;generationMean&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L452">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;raw&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L453">    line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;adjusted&quot;), WIDTH_COLUMN), CENTER_SEP));</span>

<span class="nc" id="L455">    int totalTrees = 0;</span>
<span class="nc" id="L456">    totalTrees += totalRPB;</span>
<span class="nc" id="L457">    totalTrees += totalADF;</span>

<span class="nc bnc" id="L459" title="All 2 branches missed.">    for (int i = 0; i &lt; totalTrees; i++) {</span>
<span class="nc" id="L460">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;nodes&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
<span class="nc" id="L461">      line.append(String.format(&quot;%s%s&quot;, Formatter.center(getLiterals().getString(&quot;depth&quot;), WIDTH_COLUMN), CENTER_SEP));</span>
    }
<span class="nc" id="L463">    return line.toString();</span>

  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>